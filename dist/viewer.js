!function(){var e={74:function(e){e.exports=function(){"use strict";const e="undefined"!=typeof navigator&&navigator.userAgent.toLowerCase().indexOf("firefox")>0;function t(e,t,n,o){e.addEventListener?e.addEventListener(t,n,o):e.attachEvent&&e.attachEvent("on".concat(t),n)}function n(e,t,n,o){e.removeEventListener?e.removeEventListener(t,n,o):e.detachEvent&&e.detachEvent("on".concat(t),n)}function o(e,t){const n=t.slice(0,t.length-1);for(let t=0;t<n.length;t++)n[t]=e[n[t].toLowerCase()];return n}function r(e){"string"!=typeof e&&(e="");const t=(e=e.replace(/\s/g,"")).split(",");let n=t.lastIndexOf("");for(;n>=0;)t[n-1]+=",",t.splice(n,1),n=t.lastIndexOf("");return t}function i(e,t){const n=e.length>=t.length?e:t,o=e.length>=t.length?t:e;let r=!0;for(let e=0;e<n.length;e++)-1===o.indexOf(n[e])&&(r=!1);return r}const s={backspace:8,"⌫":8,tab:9,clear:12,enter:13,"↩":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,arrowup:38,arrowdown:40,arrowleft:37,arrowright:39,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"⇪":20,",":188,".":190,"/":191,"`":192,"-":e?173:189,"=":e?61:187,";":e?59:186,"'":222,"{":219,"}":221,"[":219,"]":221,"\\":220},a={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,cmd:91,meta:91,command:91},c={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},l={16:!1,18:!1,17:!1,91:!1},u={};for(let e=1;e<20;e++)s["f".concat(e)]=111+e;let d=[],h=null,f="all";const p=new Map,m=e=>s[e.toLowerCase()]||a[e.toLowerCase()]||e.toUpperCase().charCodeAt(0),g=e=>Object.keys(s).find(t=>s[t]===e),y=e=>Object.keys(a).find(t=>a[t]===e);function v(e){f=e||"all"}function w(){return f||"all"}function E(){return d.slice(0)}function k(){return d.map(e=>g(e)||y(e)||String.fromCharCode(e))}function b(){const e=[];return Object.keys(u).forEach(t=>{u[t].forEach(t=>{let{key:n,scope:o,mods:r,shortcut:i}=t;e.push({scope:o,shortcut:i,mods:r,keys:n.split("+").map(e=>m(e))})})}),e}function x(e){const t=e.target||e.srcElement,{tagName:n}=t;let o=!0;const r="INPUT"===n&&!["checkbox","radio","range","button","file","reset","submit","color"].includes(t.type);return(t.isContentEditable||(r||"TEXTAREA"===n||"SELECT"===n)&&!t.readOnly)&&(o=!1),o}function _(e){return"string"==typeof e&&(e=m(e)),-1!==d.indexOf(e)}function I(e,t){let n,o;e||(e=w());for(const t in u)if(Object.prototype.hasOwnProperty.call(u,t))for(n=u[t],o=0;o<n.length;)n[o].scope===e?n.splice(o,1).forEach(e=>{let{element:t}=e;return L(t)}):o++;w()===e&&v(t||"all")}function S(e){let t=e.keyCode||e.which||e.charCode;e.key&&"capslock"===e.key.toLowerCase()&&(t=m(e.key));const n=d.indexOf(t);if(n>=0&&d.splice(n,1),e.key&&"meta"===e.key.toLowerCase()&&d.splice(0,d.length),93!==t&&224!==t||(t=91),t in l){l[t]=!1;for(const e in a)a[e]===t&&(C[e]=!1)}}function N(e){if(void 0===e)Object.keys(u).forEach(e=>{Array.isArray(u[e])&&u[e].forEach(e=>O(e)),delete u[e]}),L(null);else if(Array.isArray(e))e.forEach(e=>{e.key&&O(e)});else if("object"==typeof e)e.key&&O(e);else if("string"==typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];let[r,i]=n;"function"==typeof r&&(i=r,r=""),O({key:e,scope:r,method:i,splitKey:"+"})}}const O=e=>{let{key:t,scope:n,method:s,splitKey:c="+"}=e;r(t).forEach(e=>{const t=e.split(c),r=t.length,l=t[r-1],d="*"===l?"*":m(l);if(!u[d])return;n||(n=w());const h=r>1?o(a,t):[],f=[];u[d]=u[d].filter(e=>{const t=(!s||e.method===s)&&e.scope===n&&i(e.mods,h);return t&&f.push(e.element),!t}),f.forEach(e=>L(e))})};function A(e,t,n,o){if(t.element!==o)return;let r;if(t.scope===n||"all"===t.scope){r=t.mods.length>0;for(const e in l)Object.prototype.hasOwnProperty.call(l,e)&&(!l[e]&&t.mods.indexOf(+e)>-1||l[e]&&-1===t.mods.indexOf(+e))&&(r=!1);(0!==t.mods.length||l[16]||l[18]||l[17]||l[91])&&!r&&"*"!==t.shortcut||(t.keys=[],t.keys=t.keys.concat(d),!1===t.method(e,t)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0)))}}function T(e,t){const n=u["*"];let o=e.keyCode||e.which||e.charCode;if(e.key&&"capslock"===e.key.toLowerCase())return;if(!C.filter.call(this,e))return;if(93!==o&&224!==o||(o=91),-1===d.indexOf(o)&&229!==o&&d.push(o),["metaKey","ctrlKey","altKey","shiftKey"].forEach(t=>{const n=c[t];e[t]&&-1===d.indexOf(n)?d.push(n):!e[t]&&d.indexOf(n)>-1?d.splice(d.indexOf(n),1):"metaKey"===t&&e[t]&&(d=d.filter(e=>e in c||e===o))}),o in l){l[o]=!0;for(const t in a)if(Object.prototype.hasOwnProperty.call(a,t)){const n=c[a[t]];C[t]=e[n]}if(!n)return}for(const t in l)Object.prototype.hasOwnProperty.call(l,t)&&(l[t]=e[c[t]]);e.getModifierState&&(!e.altKey||e.ctrlKey)&&e.getModifierState("AltGraph")&&(-1===d.indexOf(17)&&d.push(17),-1===d.indexOf(18)&&d.push(18),l[17]=!0,l[18]=!0);const r=w();if(n)for(let o=0;o<n.length;o++)n[o].scope===r&&("keydown"===e.type&&n[o].keydown||"keyup"===e.type&&n[o].keyup)&&A(e,n[o],r,t);if(!(o in u))return;const i=u[o],s=i.length;for(let n=0;n<s;n++)if(("keydown"===e.type&&i[n].keydown||"keyup"===e.type&&i[n].keyup)&&i[n].key){const o=i[n],{splitKey:s}=o,a=o.key.split(s),c=[];for(let e=0;e<a.length;e++)c.push(m(a[e]));c.sort().join("")===d.sort().join("")&&A(e,o,r,t)}}function C(e,n,i){d=[];const s=r(e);let c=[],l="all",f=document,g=0,y=!1,v=!0,w="+",E=!1,k=!1;for(void 0===i&&"function"==typeof n&&(i=n),"[object Object]"===Object.prototype.toString.call(n)&&(n.scope&&(l=n.scope),n.element&&(f=n.element),n.keyup&&(y=n.keyup),void 0!==n.keydown&&(v=n.keydown),void 0!==n.capture&&(E=n.capture),"string"==typeof n.splitKey&&(w=n.splitKey),!0===n.single&&(k=!0)),"string"==typeof n&&(l=n),k&&N(e,l);g<s.length;g++)c=[],(e=s[g].split(w)).length>1&&(c=o(a,e)),(e="*"===(e=e[e.length-1])?"*":m(e))in u||(u[e]=[]),u[e].push({keyup:y,keydown:v,scope:l,mods:c,shortcut:s[g],method:i,key:s[g],splitKey:w,element:f});if(void 0!==f&&window){if(!p.has(f)){const e=function(){return T(arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.event,f)},n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.event;T(e,f),S(e)};p.set(f,{keydownListener:e,keyupListenr:n,capture:E}),t(f,"keydown",e,E),t(f,"keyup",n,E)}if(!h){const e=()=>{d=[]};h={listener:e,capture:E},t(window,"focus",e,E)}}}function R(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";Object.keys(u).forEach(n=>{u[n].filter(n=>n.scope===t&&n.shortcut===e).forEach(e=>{e&&e.method&&e.method()})})}function L(e){const t=Object.values(u).flat();if(t.findIndex(t=>{let{element:n}=t;return n===e})<0){const{keydownListener:t,keyupListenr:o,capture:r}=p.get(e)||{};t&&o&&(n(e,"keyup",o,r),n(e,"keydown",t,r),p.delete(e))}if((t.length<=0||p.size<=0)&&(Object.keys(p).forEach(e=>{const{keydownListener:t,keyupListenr:o,capture:r}=p.get(e)||{};t&&o&&(n(e,"keyup",o,r),n(e,"keydown",t,r),p.delete(e))}),p.clear(),Object.keys(u).forEach(e=>delete u[e]),h)){const{listener:e,capture:t}=h;n(window,"focus",e,t),h=null}}const M={getPressedKeyString:k,setScope:v,getScope:w,deleteScope:I,getPressedKeyCodes:E,getAllKeyCodes:b,isPressed:_,filter:x,trigger:R,unbind:N,keyMap:s,modifier:a,modifierMap:c};for(const e in M)Object.prototype.hasOwnProperty.call(M,e)&&(C[e]=M[e]);if("undefined"!=typeof window){const e=window.hotkeys;C.noConflict=t=>(t&&window.hotkeys===C&&(window.hotkeys=e),C),window.hotkeys=C}return C}()},689:function(e){e.exports=function(){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},n=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function e(n){var o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5e3;t(this,e),this.ctx=n,this.iframes=o,this.exclude=r,this.iframesTimeout=i}return n(e,[{key:"getContexts",value:function(){var e=[];return(void 0!==this.ctx&&this.ctx?NodeList.prototype.isPrototypeOf(this.ctx)?Array.prototype.slice.call(this.ctx):Array.isArray(this.ctx)?this.ctx:"string"==typeof this.ctx?Array.prototype.slice.call(document.querySelectorAll(this.ctx)):[this.ctx]:[]).forEach(function(t){var n=e.filter(function(e){return e.contains(t)}).length>0;-1!==e.indexOf(t)||n||e.push(t)}),e}},{key:"getIframeContents",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},o=void 0;try{var r=e.contentWindow;if(o=r.document,!r||!o)throw new Error("iframe inaccessible")}catch(e){n()}o&&t(o)}},{key:"isIframeBlank",value:function(e){var t="about:blank",n=e.getAttribute("src").trim();return e.contentWindow.location.href===t&&n!==t&&n}},{key:"observeIframeLoad",value:function(e,t,n){var o=this,r=!1,i=null,s=function s(){if(!r){r=!0,clearTimeout(i);try{o.isIframeBlank(e)||(e.removeEventListener("load",s),o.getIframeContents(e,t,n))}catch(e){n()}}};e.addEventListener("load",s),i=setTimeout(s,this.iframesTimeout)}},{key:"onIframeReady",value:function(e,t,n){try{"complete"===e.contentWindow.document.readyState?this.isIframeBlank(e)?this.observeIframeLoad(e,t,n):this.getIframeContents(e,t,n):this.observeIframeLoad(e,t,n)}catch(e){n()}}},{key:"waitForIframes",value:function(e,t){var n=this,o=0;this.forEachIframe(e,function(){return!0},function(e){o++,n.waitForIframes(e.querySelector("html"),function(){--o||t()})},function(e){e||t()})}},{key:"forEachIframe",value:function(t,n,o){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},s=t.querySelectorAll("iframe"),a=s.length,c=0;s=Array.prototype.slice.call(s);var l=function(){--a<=0&&i(c)};a||l(),s.forEach(function(t){e.matches(t,r.exclude)?l():r.onIframeReady(t,function(e){n(t)&&(c++,o(e)),l()},l)})}},{key:"createIterator",value:function(e,t,n){return document.createNodeIterator(e,t,n,!1)}},{key:"createInstanceOnIframe",value:function(t){return new e(t.querySelector("html"),this.iframes)}},{key:"compareNodeIframe",value:function(e,t,n){if(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_PRECEDING){if(null===t)return!0;if(t.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_FOLLOWING)return!0}return!1}},{key:"getIteratorNode",value:function(e){var t=e.previousNode();return{prevNode:t,node:(null===t||e.nextNode())&&e.nextNode()}}},{key:"checkIframeFilter",value:function(e,t,n,o){var r=!1,i=!1;return o.forEach(function(e,t){e.val===n&&(r=t,i=e.handled)}),this.compareNodeIframe(e,t,n)?(!1!==r||i?!1===r||i||(o[r].handled=!0):o.push({val:n,handled:!0}),!0):(!1===r&&o.push({val:n,handled:!1}),!1)}},{key:"handleOpenIframes",value:function(e,t,n,o){var r=this;e.forEach(function(e){e.handled||r.getIframeContents(e.val,function(e){r.createInstanceOnIframe(e).forEachNode(t,n,o)})})}},{key:"iterateThroughNodes",value:function(e,t,n,o,r){for(var i=this,s=this.createIterator(t,e,o),a=[],c=[],l=void 0,u=void 0,d=function(){var e=i.getIteratorNode(s);return u=e.prevNode,l=e.node};d();)this.iframes&&this.forEachIframe(t,function(e){return i.checkIframeFilter(l,u,e,a)},function(t){i.createInstanceOnIframe(t).forEachNode(e,function(e){return c.push(e)},o)}),c.push(l);c.forEach(function(e){n(e)}),this.iframes&&this.handleOpenIframes(a,e,n,o),r()}},{key:"forEachNode",value:function(e,t,n){var o=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},i=this.getContexts(),s=i.length;s||r(),i.forEach(function(i){var a=function(){o.iterateThroughNodes(e,i,t,n,function(){--s<=0&&r()})};o.iframes?o.waitForIframes(i,a):a()})}}],[{key:"matches",value:function(e,t){var n="string"==typeof t?[t]:t,o=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector;if(o){var r=!1;return n.every(function(t){return!o.call(e,t)||(r=!0,!1)}),r}return!1}}]),e}(),i=function(){function i(e){t(this,i),this.ctx=e,this.ie=!1;var n=window.navigator.userAgent;(n.indexOf("MSIE")>-1||n.indexOf("Trident")>-1)&&(this.ie=!0)}return n(i,[{key:"log",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"debug",o=this.opt.log;this.opt.debug&&"object"===(void 0===o?"undefined":e(o))&&"function"==typeof o[n]&&o[n]("mark.js: "+t)}},{key:"escapeStr",value:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}},{key:"createRegExp",value:function(e){return"disabled"!==this.opt.wildcards&&(e=this.setupWildcardsRegExp(e)),e=this.escapeStr(e),Object.keys(this.opt.synonyms).length&&(e=this.createSynonymsRegExp(e)),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(e=this.setupIgnoreJoinersRegExp(e)),this.opt.diacritics&&(e=this.createDiacriticsRegExp(e)),e=this.createMergedBlanksRegExp(e),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(e=this.createJoinersRegExp(e)),"disabled"!==this.opt.wildcards&&(e=this.createWildcardsRegExp(e)),e=this.createAccuracyRegExp(e)}},{key:"createSynonymsRegExp",value:function(e){var t=this.opt.synonyms,n=this.opt.caseSensitive?"":"i",o=this.opt.ignoreJoiners||this.opt.ignorePunctuation.length?"\0":"";for(var r in t)if(t.hasOwnProperty(r)){var i=t[r],s="disabled"!==this.opt.wildcards?this.setupWildcardsRegExp(r):this.escapeStr(r),a="disabled"!==this.opt.wildcards?this.setupWildcardsRegExp(i):this.escapeStr(i);""!==s&&""!==a&&(e=e.replace(new RegExp("("+this.escapeStr(s)+"|"+this.escapeStr(a)+")","gm"+n),o+"("+this.processSynomyms(s)+"|"+this.processSynomyms(a)+")"+o))}return e}},{key:"processSynomyms",value:function(e){return(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(e=this.setupIgnoreJoinersRegExp(e)),e}},{key:"setupWildcardsRegExp",value:function(e){return(e=e.replace(/(?:\\)*\?/g,function(e){return"\\"===e.charAt(0)?"?":""})).replace(/(?:\\)*\*/g,function(e){return"\\"===e.charAt(0)?"*":""})}},{key:"createWildcardsRegExp",value:function(e){var t="withSpaces"===this.opt.wildcards;return e.replace(/\u0001/g,t?"[\\S\\s]?":"\\S?").replace(/\u0002/g,t?"[\\S\\s]*?":"\\S*")}},{key:"setupIgnoreJoinersRegExp",value:function(e){return e.replace(/[^(|)\\]/g,function(e,t,n){var o=n.charAt(t+1);return/[(|)\\]/.test(o)||""===o?e:e+"\0"})}},{key:"createJoinersRegExp",value:function(e){var t=[],n=this.opt.ignorePunctuation;return Array.isArray(n)&&n.length&&t.push(this.escapeStr(n.join(""))),this.opt.ignoreJoiners&&t.push("\\u00ad\\u200b\\u200c\\u200d"),t.length?e.split(/\u0000+/).join("["+t.join("")+"]*"):e}},{key:"createDiacriticsRegExp",value:function(e){var t=this.opt.caseSensitive?"":"i",n=this.opt.caseSensitive?["aàáảãạăằắẳẵặâầấẩẫậäåāą","AÀÁẢÃẠĂẰẮẲẴẶÂẦẤẨẪẬÄÅĀĄ","cçćč","CÇĆČ","dđď","DĐĎ","eèéẻẽẹêềếểễệëěēę","EÈÉẺẼẸÊỀẾỂỄỆËĚĒĘ","iìíỉĩịîïī","IÌÍỈĨỊÎÏĪ","lł","LŁ","nñňń","NÑŇŃ","oòóỏõọôồốổỗộơởỡớờợöøō","OÒÓỎÕỌÔỒỐỔỖỘƠỞỠỚỜỢÖØŌ","rř","RŘ","sšśșş","SŠŚȘŞ","tťțţ","TŤȚŢ","uùúủũụưừứửữựûüůū","UÙÚỦŨỤƯỪỨỬỮỰÛÜŮŪ","yýỳỷỹỵÿ","YÝỲỶỸỴŸ","zžżź","ZŽŻŹ"]:["aàáảãạăằắẳẵặâầấẩẫậäåāąAÀÁẢÃẠĂẰẮẲẴẶÂẦẤẨẪẬÄÅĀĄ","cçćčCÇĆČ","dđďDĐĎ","eèéẻẽẹêềếểễệëěēęEÈÉẺẼẸÊỀẾỂỄỆËĚĒĘ","iìíỉĩịîïīIÌÍỈĨỊÎÏĪ","lłLŁ","nñňńNÑŇŃ","oòóỏõọôồốổỗộơởỡớờợöøōOÒÓỎÕỌÔỒỐỔỖỘƠỞỠỚỜỢÖØŌ","rřRŘ","sšśșşSŠŚȘŞ","tťțţTŤȚŢ","uùúủũụưừứửữựûüůūUÙÚỦŨỤƯỪỨỬỮỰÛÜŮŪ","yýỳỷỹỵÿYÝỲỶỸỴŸ","zžżźZŽŻŹ"],o=[];return e.split("").forEach(function(r){n.every(function(n){if(-1!==n.indexOf(r)){if(o.indexOf(n)>-1)return!1;e=e.replace(new RegExp("["+n+"]","gm"+t),"["+n+"]"),o.push(n)}return!0})}),e}},{key:"createMergedBlanksRegExp",value:function(e){return e.replace(/[\s]+/gim,"[\\s]+")}},{key:"createAccuracyRegExp",value:function(e){var t=this,n="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~¡¿",o=this.opt.accuracy,r="string"==typeof o?o:o.value,i="string"==typeof o?[]:o.limiters,s="";switch(i.forEach(function(e){s+="|"+t.escapeStr(e)}),r){case"partially":default:return"()("+e+")";case"complementary":return"()([^"+(s="\\s"+(s||this.escapeStr(n)))+"]*"+e+"[^"+s+"]*)";case"exactly":return"(^|\\s"+s+")("+e+")(?=$|\\s"+s+")"}}},{key:"getSeparatedKeywords",value:function(e){var t=this,n=[];return e.forEach(function(e){t.opt.separateWordSearch?e.split(" ").forEach(function(e){e.trim()&&-1===n.indexOf(e)&&n.push(e)}):e.trim()&&-1===n.indexOf(e)&&n.push(e)}),{keywords:n.sort(function(e,t){return t.length-e.length}),length:n.length}}},{key:"isNumeric",value:function(e){return Number(parseFloat(e))==e}},{key:"checkRanges",value:function(e){var t=this;if(!Array.isArray(e)||"[object Object]"!==Object.prototype.toString.call(e[0]))return this.log("markRanges() will only accept an array of objects"),this.opt.noMatch(e),[];var n=[],o=0;return e.sort(function(e,t){return e.start-t.start}).forEach(function(e){var r=t.callNoMatchOnInvalidRanges(e,o),i=r.start,s=r.end;r.valid&&(e.start=i,e.length=s-i,n.push(e),o=s)}),n}},{key:"callNoMatchOnInvalidRanges",value:function(e,t){var n=void 0,o=void 0,r=!1;return e&&void 0!==e.start?(o=(n=parseInt(e.start,10))+parseInt(e.length,10),this.isNumeric(e.start)&&this.isNumeric(e.length)&&o-t>0&&o-n>0?r=!0:(this.log("Ignoring invalid or overlapping range: "+JSON.stringify(e)),this.opt.noMatch(e))):(this.log("Ignoring invalid range: "+JSON.stringify(e)),this.opt.noMatch(e)),{start:n,end:o,valid:r}}},{key:"checkWhitespaceRanges",value:function(e,t,n){var o=void 0,r=!0,i=n.length,s=t-i,a=parseInt(e.start,10)-s;return(o=(a=a>i?i:a)+parseInt(e.length,10))>i&&(o=i,this.log("End range automatically set to the max value of "+i)),a<0||o-a<0||a>i||o>i?(r=!1,this.log("Invalid range: "+JSON.stringify(e)),this.opt.noMatch(e)):""===n.substring(a,o).replace(/\s+/g,"")&&(r=!1,this.log("Skipping whitespace only range: "+JSON.stringify(e)),this.opt.noMatch(e)),{start:a,end:o,valid:r}}},{key:"getTextNodes",value:function(e){var t=this,n="",o=[];this.iterator.forEachNode(NodeFilter.SHOW_TEXT,function(e){o.push({start:n.length,end:(n+=e.textContent).length,node:e})},function(e){return t.matchesExclude(e.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},function(){e({value:n,nodes:o})})}},{key:"matchesExclude",value:function(e){return r.matches(e,this.opt.exclude.concat(["script","style","title","head","html"]))}},{key:"wrapRangeInTextNode",value:function(e,t,n){var o=this.opt.element?this.opt.element:"mark",r=e.splitText(t),i=r.splitText(n-t),s=document.createElement(o);return s.setAttribute("data-markjs","true"),this.opt.className&&s.setAttribute("class",this.opt.className),s.textContent=r.textContent,r.parentNode.replaceChild(s,r),i}},{key:"wrapRangeInMappedTextNode",value:function(e,t,n,o,r){var i=this;e.nodes.every(function(s,a){var c=e.nodes[a+1];if(void 0===c||c.start>t){if(!o(s.node))return!1;var l=t-s.start,u=(n>s.end?s.end:n)-s.start,d=e.value.substr(0,s.start),h=e.value.substr(u+s.start);if(s.node=i.wrapRangeInTextNode(s.node,l,u),e.value=d+h,e.nodes.forEach(function(t,n){n>=a&&(e.nodes[n].start>0&&n!==a&&(e.nodes[n].start-=u),e.nodes[n].end-=u)}),n-=u,r(s.node.previousSibling,s.start),!(n>s.end))return!1;t=s.end}return!0})}},{key:"wrapMatches",value:function(e,t,n,o,r){var i=this,s=0===t?0:t+1;this.getTextNodes(function(t){t.nodes.forEach(function(t){t=t.node;for(var r=void 0;null!==(r=e.exec(t.textContent))&&""!==r[s];)if(n(r[s],t)){var a=r.index;if(0!==s)for(var c=1;c<s;c++)a+=r[c].length;t=i.wrapRangeInTextNode(t,a,a+r[s].length),o(t.previousSibling),e.lastIndex=0}}),r()})}},{key:"wrapMatchesAcrossElements",value:function(e,t,n,o,r){var i=this,s=0===t?0:t+1;this.getTextNodes(function(t){for(var a=void 0;null!==(a=e.exec(t.value))&&""!==a[s];){var c=a.index;if(0!==s)for(var l=1;l<s;l++)c+=a[l].length;var u=c+a[s].length;i.wrapRangeInMappedTextNode(t,c,u,function(e){return n(a[s],e)},function(t,n){e.lastIndex=n,o(t)})}r()})}},{key:"wrapRangeFromIndex",value:function(e,t,n,o){var r=this;this.getTextNodes(function(i){var s=i.value.length;e.forEach(function(e,o){var a=r.checkWhitespaceRanges(e,s,i.value),c=a.start,l=a.end;a.valid&&r.wrapRangeInMappedTextNode(i,c,l,function(n){return t(n,e,i.value.substring(c,l),o)},function(t){n(t,e)})}),o()})}},{key:"unwrapMatches",value:function(e){for(var t=e.parentNode,n=document.createDocumentFragment();e.firstChild;)n.appendChild(e.removeChild(e.firstChild));t.replaceChild(n,e),this.ie?this.normalizeTextNode(t):t.normalize()}},{key:"normalizeTextNode",value:function(e){if(e){if(3===e.nodeType)for(;e.nextSibling&&3===e.nextSibling.nodeType;)e.nodeValue+=e.nextSibling.nodeValue,e.parentNode.removeChild(e.nextSibling);else this.normalizeTextNode(e.firstChild);this.normalizeTextNode(e.nextSibling)}}},{key:"markRegExp",value:function(e,t){var n=this;this.opt=t,this.log('Searching with expression "'+e+'"');var o=0,r="wrapMatches",i=function(e){o++,n.opt.each(e)};this.opt.acrossElements&&(r="wrapMatchesAcrossElements"),this[r](e,this.opt.ignoreGroups,function(e,t){return n.opt.filter(t,e,o)},i,function(){0===o&&n.opt.noMatch(e),n.opt.done(o)})}},{key:"mark",value:function(e,t){var n=this;this.opt=t;var o=0,r="wrapMatches",i=this.getSeparatedKeywords("string"==typeof e?[e]:e),s=i.keywords,a=i.length,c=this.opt.caseSensitive?"":"i",l=function e(t){var i=new RegExp(n.createRegExp(t),"gm"+c),l=0;n.log('Searching with expression "'+i+'"'),n[r](i,1,function(e,r){return n.opt.filter(r,t,o,l)},function(e){l++,o++,n.opt.each(e)},function(){0===l&&n.opt.noMatch(t),s[a-1]===t?n.opt.done(o):e(s[s.indexOf(t)+1])})};this.opt.acrossElements&&(r="wrapMatchesAcrossElements"),0===a?this.opt.done(o):l(s[0])}},{key:"markRanges",value:function(e,t){var n=this;this.opt=t;var o=0,r=this.checkRanges(e);r&&r.length?(this.log("Starting to mark with the following ranges: "+JSON.stringify(r)),this.wrapRangeFromIndex(r,function(e,t,o,r){return n.opt.filter(e,t,o,r)},function(e,t){o++,n.opt.each(e,t)},function(){n.opt.done(o)})):this.opt.done(o)}},{key:"unmark",value:function(e){var t=this;this.opt=e;var n=this.opt.element?this.opt.element:"*";n+="[data-markjs]",this.opt.className&&(n+="."+this.opt.className),this.log('Removal selector "'+n+'"'),this.iterator.forEachNode(NodeFilter.SHOW_ELEMENT,function(e){t.unwrapMatches(e)},function(e){var o=r.matches(e,n),i=t.matchesExclude(e);return!o||i?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},this.opt.done)}},{key:"opt",set:function(e){this._opt=o({},{element:"",className:"",exclude:[],iframes:!1,iframesTimeout:5e3,separateWordSearch:!0,diacritics:!0,synonyms:{},accuracy:"partially",acrossElements:!1,caseSensitive:!1,ignoreJoiners:!1,ignoreGroups:0,ignorePunctuation:[],wildcards:"disabled",each:function(){},noMatch:function(){},filter:function(){return!0},done:function(){},debug:!1,log:window.console},e)},get:function(){return this._opt}},{key:"iterator",get:function(){return new r(this.ctx,this.opt.iframes,this.opt.exclude,this.opt.iframesTimeout)}}]),i}();function s(e){var t=this,n=new i(e);return this.mark=function(e,o){return n.mark(e,o),t},this.markRegExp=function(e,o){return n.markRegExp(e,o),t},this.markRanges=function(e,o){return n.markRanges(e,o),t},this.unmark=function(e){return n.unmark(e),t},this}return s}()}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,n),i.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";var e=n(689),t=n.n(e);class o{constructor(e,t,n,o,s){this.removeSpan=(e,t,n)=>{if(t.forEach(t=>{e.classList.remove(t)}),n.forEach(t=>{e.removeAttribute(t)}),0===e.classList.length){const t=e.parentElement;e.replaceWith(...Array.from(e.childNodes)),t.normalize()}},this.getOffset=(e,t)=>{let n=e.offsetTop,o=e.offsetLeft,r=e.offsetParent;for(;r!==t&&null!==r;)n+=r.offsetTop+2*Number(this.content_window.getComputedStyle(r).borderWidth.match(/^[0-9]+/)[0]),o+=r.offsetLeft,r=r.offsetParent;return{offset_top:n,offset_left:o}},this.rgbTo16=e=>"#"+e.match(/\d+/g)?.map(e=>("0"+parseInt(e).toString(16)).slice(-2)).join(""),this.getSelectorFromElement=e=>{const t=[];for(;e;){let n=e.nodeName.toLowerCase();if(e.id){n+="#"+e.id,t.unshift(n);break}n+=":nth-of-type("+this.getSiblingElementsIndex(e,n)+")",t.unshift(n),e=e.parentNode}return t},this.getSiblingElementsIndex=(e,t)=>{let n=1,o=e;for(;o=o.previousElementSibling;)o.nodeName.toLowerCase()===t&&++n;return n},this.content_root=e,this.content_window=t,this.word=new r(this,o,s),this.cv=new i(this,n)}hslToRgb(e,t,n){let o,r,i;if(0==t)o=r=i=n;else{const s=function(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e};let a=n<.5?n*(1+t):n+t-n*t,c=2*n-a;o=s(c,a,e+1/3),r=s(c,a,e),i=s(c,a,e-1/3)}return"#"+`0${Math.floor(255*o).toString(16)}`.slice(-2)+`0${Math.floor(255*r).toString(16)}`.slice(-2)+`0${Math.floor(255*i).toString(16)}`.slice(-2)}}class r{constructor(e,t,n){this.option={},this.selected_color={},this.setOption=e=>{this.option=e,Object.keys(this.option).forEach(e=>{this.option[e]&&this.selected_color[e]&&(this.option[e].color=this.selected_color[e])})},this.setColor=(e,t)=>{this.selected_color[e]=t,this.option[e]&&(this.option[e].color=t)},this.clear=e=>{Array.from(e.querySelectorAll("span.word_inversion")).forEach(e=>{if(Array.from(e.classList).forEach(t=>{-1!==t.indexOf("word_inversion")&&e.classList.remove(t)}),e.removeAttribute("data-markjs"),0===e.classList.length&&1===e.attributes.length){const t=e.parentNode;for(;e.firstChild;)t.insertBefore(e.firstChild,e);t.removeChild(e),t.normalize()}});const t=this.sat.content_window.document.head.querySelector("style#SAT_word_inversion");null!==t&&t.remove()},this.getWordColors=e=>{const t=[],n=this.sat.word.lightness;for(let o=0;o<e;o++)t.push(this.sat.hslToRgb(o/e,1,n));return t},this.calcWordColor=e=>.299*parseInt(e.substr(1,2),16)+.587*parseInt(e.substr(3,2),16)+.114*parseInt(e.substr(5,2),16)>=140?"#111":"#eed",this.hasIntersection=(e,t)=>{const n=(e,t)=>{const o=e.match(/^[0-9]+/)[0],r=t.match(/^[0-9]+/)[0];if(Number(o)<Number(r))return-1;if(Number(o)>Number(r))return 1;if(e===t)return 0;const i=e.split("-"),s=t.split("-");return i.length>1&&s.length>1?n(i.slice(1).join("-"),s.slice(1).join("-")):i.length>1?1:s.length>1?-1:0},o=(e,t)=>{const o=n(e[0],t),r=n(e[1],t);return 0===o||0===r||o!==r};if(-1!==e.indexOf(",")){if(-1!==t.indexOf(",")){const n=e.split(","),r=t.split(",");return o(n,r[0])||o(n,r[1])||o(r,n[0])||o(r,n[1])}return o(e.split(","),t)}return-1!==t.indexOf(",")?o(t.split(","),e):e===t},this.sat=e,this.selected_color=t,this.lightness=n}invert(e){this.clear(e);const n=new(t())(e),o={element:"span",accuracy:"partially",separateWordSearch:!1,acrossElements:!0,ignoreJoiners:!0,ignorePunctuation:":;.,-–—‒_(){}[]!'\"+=".split(""),each:e=>{e.classList.add("word_inversion")},className:""},r=document.createElement("style");r.type="text/css",r.id="SAT_word_inversion",this.sat.content_window.document.head.prepend(r);for(const e in this.option){o.className=`word_inversion_class${Number(e)}`;const t=this.option[e].color;r.sheet.insertRule(`span.word_inversion_class${e}, span.word_inversion_class${e} * {background-color: ${t} !important; color: ${this.calcWordColor(t)} !important}`,0),this.option[e].words.forEach(t=>{if(/^\/.*\/[dgimsuy]*$/.test(t)){let e="";t.match(/([dgimsuy]+)$/)&&(e=t.match(/([dgimsuy]+)$/)[0],t=t.slice(0,-e.length));const r=new RegExp(t.slice(1,-1),e);n.markRegExp(r,o)}else n.mark(t,o),/^a[0-9]+(-[0-9]+)*(,[0-9]+(-[0-9]+)*)?$/.test(t)&&Array.from(this.sat.content_root.querySelectorAll("span[article_num]")).forEach(n=>{const o=t.substring(1),r=n.getAttribute("article_num");/^[0-9]+(-[0-9]+)*(,[0-9]+(-[0-9]+)*)?$/.test(r)&&this.hasIntersection(o,r)&&(n.classList.add("word_inversion"),n.classList.add(`word_inversion_class${e}`),n.setAttribute("data-markjs","true"))})})}"none"!==this.sat.content_root.querySelector("details")?.style.display&&Array.from(this.sat.content_root.querySelectorAll("details")).forEach(e=>{e.querySelector("span.word_inversion")&&!1===e.open&&(e.open=!0)})}}class i{constructor(e,t){this.word_rect=[],this.updateData=()=>{this.word_rect=[];const e={};Array.from(new Set(Object.keys(this.sat.word.option).map(e=>this.sat.word.option[e].color))).filter(e=>""!==e).forEach((t,n)=>{e[t]=n});const t=Object.keys(e).length,n=this.sat.content_root.parentElement.scrollHeight;Array.from(this.sat.content_root.querySelectorAll("span.word_inversion")).filter(e=>null!==e.offsetParent).forEach(o=>{const r=this.sat.rgbTo16(window.getComputedStyle(o).backgroundColor),i=this.element.width*(e[r]/t),s=this.sat.getOffset(o,this.sat.content_root),a=this.element.height*(s.offset_top/n),c=3*Math.max(o.offsetHeight/this.element.height,2);this.word_rect.push([r,Math.round(i)-.5,Math.round(a-c/2)-.5,Math.round(this.element.width/t)+0,5,Math.round(c/2)])})},this.draw=()=>{const e=this.element.getContext("2d");e.clearRect(0,0,this.element.width,this.element.height),this.word_rect.forEach(t=>{e.fillStyle=t[0],e.fillRect(t[1],t[2],t[3],t[4])}),e.strokeStyle="white",e.lineWidth=5;const t=document.getElementById("main"),n=t.scrollTop,o=t.scrollHeight,r=document.querySelector("div.top")?document.querySelector("div.top").offsetHeight:0;e.strokeRect(2.5,n*(this.element.height/o),this.element.width-2.5,(window.innerHeight-r)*(this.element.height/o))},this.sat=e,this.element=t}}var s=n(74),a=n.n(s);let c;function l(){const e=document.getElementById("word_query").innerText.trim().replace(/[\r\n]+/g," ");if(""===e||/^\s+$/.test(e))return{};const t=e.split(/\s+/).map(e=>{const t=e.match(/(^\/|[^\\]\/|\/$)/g);return t&&t.length>0&&t.length%2==0?u(e,[]):e.split(/[+＋]/g)}),n=c.word.getWordColors(t.length),o={};return t.forEach((e,t)=>{e.forEach(e=>{o[t]||(o[t]={words:[],color:""}),"/"!==e.substr(0,1)?o[t].words.push(e.replace(/_/g," ")):o[t].words.push(e),o[t].color=n[t]})}),o}function u(e,t){if("/"!==e.substr(0,1)){const n=e.indexOf("+");return-1===n?(t.push(e),t):(t.push(e.substring(0,n)),u(e.substring(n+1),t))}{const n=e.match(/[^\\]\/[dgimsuy]*/);return n?(t.push(e.substring(0,n.index+n[0].length)),e.length===n.index+n[0].length?t:u(e.substring(n.index+n[0].length+1),t)):t}}function d(){const e=document.getElementById("word_query");e.innerHTML="",Object.keys(c.word.option).forEach(t=>{c.word.option[t].words.forEach((n,o)=>{const r=document.createElement("span");r.innerText=n.replace(/ /g,"_"),r.setAttribute("mode","word_inversion"),r.setAttribute("color_id",t),r.classList.add("query_unit"),r.classList.add(`word_inversion_class${t}`),r.onclick=e=>{if(!(e.target instanceof HTMLElement))return;const t=document.getElementById("color_picker");t.setAttribute("color_id",e.target.getAttribute("color_id")),t.style.display="block",t.style.left=c.getOffset(e.target,document.body).offset_left+e.target.offsetWidth/2-document.getElementById("color_picker").offsetWidth/2+"px",t.setAttribute("mode","word_inversion"),e.preventDefault(),e.stopPropagation()},e.appendChild(r),o!==c.word.option[t].words.length-1&&e.appendChild(document.createTextNode("+"))}),e.appendChild(document.createTextNode(" "))})}function h(e,t,n){document.getElementById("loading_message").innerHTML=e;const o=document.getElementById("spinner");o.classList.add("visible"),new Promise((e,o)=>{setTimeout(()=>{n(),e(null)},t)}).then(()=>{o.classList.remove("visible")})}window.initialize=async()=>{const e=window,t=document.getElementById("content"),n=window.getComputedStyle(document.getElementById("spectrum")),r=document.getElementById("spectrum_bar");r.width=Number(n.width.replace("px","")),r.height=Number(n.height.replace("px","")),c=new o(t,e,r,{},Number(document.getElementById("word_inversion_lightness").value)),async function(){document.addEventListener("click",e=>{if(!(e.target instanceof HTMLElement))return;const t=document.getElementById("color_picker");"none"===t.style.display||t.contains(e.target)||(t.style.display="none")}),document.getElementById("main").addEventListener("scroll",e=>{c.cv.draw()}),window.addEventListener("resize",e=>{setTimeout(()=>{const e=window.getComputedStyle(document.getElementById("spectrum")),t=document.getElementById("spectrum_bar");t.width=Number(e.width.replace("px","")),t.height=Number(e.height.replace("px","")),c.cv.updateData(),c.cv.draw()},0)}),c.cv.element.onclick=e=>{document.getElementById("main").scrollTo(0,e.offsetY*(document.getElementById("main").scrollHeight/c.cv.element.height)-c.cv.element.height/2)},c.cv.element.onmousedown=e=>{c.cv.element.onmousemove=e=>{document.getElementById("main").scrollTo(0,e.offsetY*(document.getElementById("main").scrollHeight/c.cv.element.height)-c.cv.element.height/2)},c.cv.element.onmouseup=()=>{c.cv.element.onmousemove=null,c.cv.element.onmouseup=null}},c.cv.element.onmouseover=()=>{c.cv.element.onmousemove=null},document.getElementById("word_inversion_lightness").addEventListener("change",e=>{localStorage.setItem("SAT_word_inversion_lightness",e.target.value),e.target instanceof HTMLInputElement&&(c.word.lightness=Number(e.target.value),c.word.setOption(l()),c.word.invert(c.content_root),d(),c.cv.updateData(),c.cv.draw())}),document.getElementById("word_query").addEventListener("keydown",e=>{"Enter"===e.key&&(e.preventDefault(),h("ワード反転中...",0,()=>{c.word.setOption(l()),c.word.invert(c.content_root),d(),c.cv.updateData(),c.cv.draw(),document.getElementById("word_query").blur()}))}),document.getElementById("colormap").addEventListener("mouseout",e=>{!function(){const e=document.getElementById("color_picker").getAttribute("color_id");Array.from(document.getElementById("word_query").querySelectorAll("span")).filter(t=>t.getAttribute("color_id")===e).forEach(e=>{e.removeAttribute("style")})}()}),Array.from(document.getElementById("colormap").querySelectorAll("area")).forEach(e=>{e.addEventListener("mouseover",t=>{!function(e){const t=document.getElementById("color_picker").getAttribute("color_id");Array.from(document.getElementById("word_query").querySelectorAll("span")).filter(e=>e.getAttribute("color_id")===t).forEach(t=>{t.style.setProperty("background-color",e,"important"),t.style.color=c.word.calcWordColor(e)})}(e.alt)}),e.addEventListener("click",t=>{!function(e){e=e.toLowerCase();const t=document.getElementById("color_picker").getAttribute("color_id");h("ワード反転中...",0,()=>{c.word.setColor(Number(t),e),c.word.invert(c.content_root),d(),c.cv.updateData(),c.cv.draw()}),document.getElementById("color_picker").style.display="none"}(e.alt)})});new MutationObserver(e=>{c.cv.updateData(),c.cv.draw()}).observe(document.body,{attributes:!0,attributeFilter:["offsetHeight","clientHeight","scrollHeight","height","offsetWidth","clientWidth","scrollWidth","width"]});new MutationObserver(e=>{c.cv.updateData();c.cv.draw()}).observe(document.getElementById("spectrum"),{attributes:!0,attributeFilter:["offsetHeight","clientHeight","scrollHeight","height","offsetWidth","clientWidth","scrollWidth","width"]}),document.getElementById("word_query").addEventListener("click",e=>{e.target instanceof HTMLElement&&e.target.querySelectorAll("span").forEach(e=>{e.className="",e.onclick=null})}),document.getElementById("word_query").addEventListener("paste",e=>{e.preventDefault();const t=e.clipboardData.getData("text/plain");document.execCommand("insertHTML",!1,t)}),localStorage.getItem("SAT_word_inversion_lightness")&&(document.getElementById("word_inversion_lightness").value=localStorage.getItem("SAT_word_inversion_lightness"),c.word.lightness=Number(localStorage.getItem("SAT_word_inversion_lightness")));document.getElementById("fusoku_display")?.addEventListener("click",()=>{if(!document.querySelector("section.SupplProvision"))return;"none"===document.querySelector("section.SupplProvision").style.display?Array.from(document.querySelectorAll("section.SupplProvision")).forEach(e=>{e.style.display=""}):Array.from(document.querySelectorAll("section.SupplProvision")).forEach(e=>{e.style.display="none"}),window.initializeBreadcrumbNavigation&&window.initializeBreadcrumbNavigation(),c.cv.updateData()})}(),function(){a().filter=e=>!0,a()("ctrl+shift+f",(e,t)=>{function n(e){const t=document.createRange(),n=window.getSelection();t.selectNodeContents(e),t.collapse(!1),n?.removeAllRanges(),n?.addRange(t),e.focus(),t.detach()}e.preventDefault();const o=document.getElementById("word_query");o.click(),n(o)}),document.getElementById("article_jump")&&a()("ctrl+/",(e,t)=>{e.preventDefault(),document.getElementById("article_jump").value="",document.getElementById("article_jump")?.focus()});document.addEventListener("keydown",e=>{if(e instanceof KeyboardEvent&&8===e.keyCode){let t=!0;const n=e.target;if(("word_query"===n.id||n.isContentEditable||"INPUT"===n.tagName||"TEXTAREA"===n.tagName)&&(t=!1),t)return void e.preventDefault()}})}(),c.word.setOption(l()),c.word.invert(c.content_root),d(),setTimeout(()=>{c.cv.updateData(),c.cv.draw()},100)}}()}();